<Window x:Class="TellerApp.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Teller App" Height="600" Width="1000"
        Background="#1E1E1E">
    <Grid Margin="8">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>
        <!-- Panel Kiri: Kontrol -->
        <Border Padding="12" Background="#252525" CornerRadius="6" Margin="0 0 8 0">
            <ScrollViewer>
                <StackPanel>
                    <TextBlock Text="Teller Panel" FontSize="20" FontWeight="Bold" Foreground="White"/>
                    <Separator Margin="0 12"/>
                    <TextBlock Text="Loket:" Foreground="White" />
                    <ComboBox x:Name="LoketCombo" Margin="0 4" SelectedIndex="0">
                        <ComboBoxItem Content="1"/>
                        <ComboBoxItem Content="2"/>
                        <ComboBoxItem Content="3"/>
                        <ComboBoxItem Content="4"/>
                        <ComboBoxItem Content="5"/>
                    </ComboBox>

                    <StackPanel Orientation="Horizontal" Margin="0 8 0 0">
                        <Button Content="Panggil Berikutnya" Click="CallNext_Click" Margin="0 0 6 0" Padding="10 6"/>
                        <Button Content="Recall" Click="Recall_Click" Padding="10 6"/>
                    </StackPanel>

                    <Separator Margin="0 12"/>
                    <TextBlock Text="Prefix Nomor" Foreground="White"/>
                    <StackPanel Orientation="Horizontal">
                        <TextBox x:Name="PrefixBox" Width="60" Margin="0 4 4 4"/>
                        <Button Content="Simpan" Click="SavePrefix_Click"/>
                    </StackPanel>

                    <TextBlock Text="Running Text" Foreground="White" Margin="0 8 0 0"/>
                    <TextBox x:Name="RunningTextBox" AcceptsReturn="True" Height="80" TextWrapping="Wrap" />
                    <Button Content="Simpan Running Text" Margin="0 6 0 0" Click="SaveRunningText_Click"/>

                    <TextBlock Foreground="LightGray" FontSize="10" Margin="0 16 0 0"
                               Text="NOTE: Ubah BaseAddress di MainWindow.xaml.cs jika port server berubah"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Daftar Tiket -->
        <DockPanel Grid.Column="1" Margin="8 0">
            <TextBlock DockPanel.Dock="Top" Text="Daftar Tiket Hari Ini" FontSize="18" FontWeight="Bold" Margin="0 0 0 8" Foreground="White"/>
            <DataGrid x:Name="TicketsGrid" AutoGenerateColumns="False" IsReadOnly="True"
                      Background="#2A2A2A" Foreground="White" HeadersVisibility="Column" GridLinesVisibility="None">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="No" Binding="{Binding TicketNumber}" Width="80"/>
                    <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
                    <DataGridTextColumn Header="Loket" Binding="{Binding CounterNumber}" Width="60"/>
                    <DataGridTextColumn Header="Dipanggil" Binding="{Binding CalledAt}" Width="140"/>
                </DataGrid.Columns>
            </DataGrid>
        </DockPanel>

        <!-- Panel Status Loket -->
        <Border Grid.Column="2" Margin="8 0 0 0" Padding="16" BorderBrush="#444" BorderThickness="1" Background="#222" CornerRadius="8">
            <StackPanel>
                <TextBlock Text="Status Loket (Aktif)" FontSize="18" FontWeight="Bold" Foreground="White"/>
                <TextBlock x:Name="ActiveTicketText" FontSize="48" FontWeight="Bold" Margin="0 20 0 0" Text="-" Foreground="White"/>
                <TextBlock x:Name="ActiveTicketStatus" FontSize="20" Foreground="LightGray" />
                <Separator Margin="0 20 0 20"/>
                <TextBlock Text="Menunggu (Top 5)" FontWeight="Bold" Foreground="White"/>
                <ItemsControl x:Name="WaitingList">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding TicketNumber}" FontSize="16" Foreground="White"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Border>
    </Grid>
</Window>